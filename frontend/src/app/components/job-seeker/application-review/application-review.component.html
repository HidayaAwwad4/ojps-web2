<div class="container mt-5">
  <h4>Excellent progress so far!</h4>
  <p>...</p>

  <div class="row mt-4" style="min-height: 400px;">
    <div class="col-md-6 d-flex flex-column align-items-center">
      <h5 class="cv-title">Your CV</h5>
      <div class="flex-fill d-flex align-items-center justify-content-center p-3 border rounded cv-box w-100">
        <ng-container *ngIf="!editingCV">
          <!-- If image -->
          <img *ngIf="cvUrl && (cvUrl.endsWith('.png') || cvUrl.endsWith('.jpg') || cvUrl.endsWith('.jpeg'))"
               [src]="cvUrl" alt="CV Preview" class="img-fluid w-100" style="object-fit: contain; max-height: 100%;">

          <!-- If PDF -->
          <iframe *ngIf="cvUrl && cvUrl.endsWith('.pdf')"
                  [src]="cvUrl" width="100%" height="300px"></iframe>

          <!-- If no CV -->
          <img *ngIf="!cvUrl"
               src="assets/cv-placeholder.png"
               alt="CV Placeholder"
               class="img-fluid w-100"
               style="object-fit: contain; max-height: 100%;">
        </ng-container>

        <!-- أثناء التعديل -->
        <ng-container *ngIf="editingCV">
          <input type="file" (change)="onFileSelected($event)" accept=".pdf,.png,.jpg,.jpeg" />
        </ng-container>
      </div>

      <button class="btn btn-sm btn-edit mt-3" (click)="onEditCV()" *ngIf="!editingCV">Edit</button>
      <button class="btn btn-sm btn-cancel mt-3" (click)="editingCV=false" *ngIf="editingCV">Cancel</button>
    </div>

    <div class="col-md-6 d-flex flex-column">
      <h5>Cover Letter</h5>
      <form [formGroup]="applicationForm" (ngSubmit)="onSubmit()" class="flex-fill d-flex flex-column p-3 border rounded cover-box">
        <textarea
          class="form-control flex-fill cover-letter-textarea"
          placeholder="Add a short cover letter to support your application"
          formControlName="coverLetter"
        ></textarea>

        <div *ngIf="applicationForm.get('coverLetter')?.invalid && applicationForm.get('coverLetter')?.touched" class="text-danger">
          Cover letter is required.
        </div>


        <div class="d-flex justify-content-center submit-container mt-3">
          <button type="submit" class="btn btn-success btn-sm custom-submit-btn" [disabled]="applicationForm.invalid">Submit</button>
        </div>
      </form>
    </div>
  </div>
</div>
