<div class="application-wrapper">
  <div class="application-form">

    <div class="text-start mb-3">
      <button type="button" class="btn btn-secondary" (click)="goBack()">
        <i class="bi bi-arrow-left me-1"></i> Back
      </button>
    </div>

    <h3 class="text-center mb-4">Submit Your Application</h3>

    <div class="mb-4">
      <label class="form-label fw-semibold">Your CV (PDF):</label>

      <div *ngIf="cvFileName; else uploadCV" class="d-flex align-items-center gap-3">
        <span class="cv-file-name"><i class="bi bi-file-earmark-pdf-fill text-danger me-1"></i>{{ cvFileName }}</span>
        <button type="button" class="btn btn-edit" (click)="onEditCV()">
          <i class="bi bi-pencil-square me-1"></i> Edit
        </button>
      </div>

      <ng-template #uploadCV>
        <input type="file" accept="application/pdf" (change)="onFileSelected($event)" />
        <div class="form-text text-muted">Only PDF files are allowed.</div>
      </ng-template>
    </div>

    <div class="mb-4">
      <label for="coverLetter" class="form-label fw-semibold">Cover Letter:</label>
      <textarea
        id="coverLetter"
        class="form-control cover-letter-textarea"
        rows="8"
        [(ngModel)]="coverLetter"
        (input)="validateForm()"
        placeholder="Write a short cover letter to support your application"
      ></textarea>
      <div class="form-text text-muted">This helps us understand why you're a great fit.</div>
    </div>

    <div class="text-center mt-4">
      <button
        type="button"
        class="custom-submit-btn"
        [class.disabled-btn]="!formValid"
        [disabled]="!formValid"
        (click)="onSubmit()"
      >
        <i class="bi bi-send-fill me-2"></i> Submit Application
      </button>
    </div>

    <input
      type="file"
      accept="application/pdf"
      #fileInput
      hidden
      (change)="onFileSelected($event)"
    />
  </div>
</div>
